<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Csv Storage System - QuantDesk Documentation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        body {
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            line-height: 1.6;
            color: #ffffff;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #000000;
            font-size: 14px;
        }
        .container {
            background: #000000;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #333333;
        }
        .back-link {
            margin-bottom: 20px;
        }
        .back-link a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        .back-link a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #ffffff;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        h1 {
            border-bottom: 2px solid #333333;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #333333;
            padding-bottom: 8px;
        }
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            color: #ffffff;
            border: 1px solid #333333;
        }
        pre {
            background: #0a0a0a;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #333333;
            margin: 20px 0;
        }
        pre code {
            background: none;
            padding: 0;
            color: #ffffff;
            border: none;
        }
        blockquote {
            border-left: 4px solid #3b82f6;
            margin: 0;
            padding-left: 20px;
            color: #d9d9d9;
            background: #1a1a1a;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            border: 1px solid #333333;
        }
        th, td {
            border: 1px solid #333333;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #1a1a1a;
            font-weight: bold;
            color: #ffffff;
        }
        td {
            color: #d9d9d9;
        }
        ul, ol {
            color: #d9d9d9;
        }
        li {
            margin-bottom: 8px;
        }
        a {
            color: #3b82f6;
            text-decoration: none;
        }
        a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        /* Syntax Highlighting Overrides */
        pre[class*="language-"] {
            background: #0a0a0a !important;
            border: 1px solid #333333 !important;
            border-radius: 8px !important;
            padding: 20px !important;
            margin: 20px 0 !important;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace !important;
            font-size: 13px !important;
            line-height: 1.5 !important;
        }
        .token.comment { color: #6a9955 !important; }
        .token.keyword { color: #569cd6 !important; }
        .token.string { color: #ce9178 !important; }
        .token.number { color: #b5cea8 !important; }
        .token.function { color: #dcdcaa !important; }
        .token.class-name { color: #4ec9b0 !important; }
        .token.operator { color: #d4d4d4 !important; }
        .token.punctuation { color: #d4d4d4 !important; }
        .token.variable { color: #9cdcfe !important; }
        .token.constant { color: #4fc1ff !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="back-link">
            <a href="/docs">&larr; Back to Documentation</a>
        </div>
        <h1>CSV Storage System Documentation</h1>
<h2>Overview</h2>
<p>The CSV Storage System provides a robust, scalable solution for storing and loading candlestick (OHLCV) data in CSV format. <strong>This is the CURRENT system</strong> that replaces the previous database (Neon/Supabase) approach due to limitations and costs. It offers better performance, unlimited storage, and easier data management.</p>
<h3>Why CSV Storage?</h3>
<ul>
<li><strong>No Database Limits</strong>: Unlimited storage without Neon/Supabase constraints</li>
<li><strong>Better Performance</strong>: Direct file access vs. SQL queries</li>
<li><strong>Cost Effective</strong>: No database hosting costs</li>
<li><strong>Simpler Management</strong>: Easy backup, restore, and data portability</li>
<li><strong>Offline Capable</strong>: Works without internet connection</li>
</ul>
<h2>Features</h2>
<ul>
<li><strong>Per-day CSV files</strong> organized by exchange/pair/interval/year/month</li>
<li><strong>Automatic folder creation</strong> and data deduplication</li>
<li><strong>Flexible data loading</strong> with date ranges and multiple pairs</li>
<li><strong>Data validation</strong> and integrity checks</li>
<li><strong>Resampling capabilities</strong> for different timeframes</li>
<li><strong>Automated daily fetching</strong> with cron jobs</li>
<li><strong>Comprehensive logging</strong> and error handling</li>
</ul>
<h2>Directory Structure</h2>
<div class="codehilite"><pre><span></span><code>data/ohlcv/
├── {exchange}/                    # Exchange name (e.g., binance, bitget)
│   ├── {pair}/                    # Trading pair (e.g., BTC/USDT, ETH/USDT)
│   │   ├── {interval}/            # Timeframe (e.g., 1m, 5m, 1h, 1d)
│   │   │   ├── {YYYY}/            # Year
│   │   │   │   ├── {MM}/          # Month
│   │   │   │   │   ├── {YYYY-MM-DD}.csv  # Daily CSV file
│   │   │   │   │   └── ...
│   │   │   │   └── ...
│   │   │   └── ...
│   │   └── ...
│   └── ...
└── ...
</code></pre></div>

<h2>Components</h2>
<h3>1. CSV Storage (<code>src/data/csv_storage.py</code>)</h3>
<p>The core storage class that handles saving and loading candlestick data.</p>
<p><strong>Key Methods:</strong>
- <code>store_candles()</code> - Store candlestick data with deduplication
- <code>load_candles()</code> - Load data for a specific date range
- <code>resample_candles()</code> - Resample data to different timeframes
- <code>verify_data_integrity()</code> - Validate data quality</p>
<p><strong>Example:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">src.data.csv_storage</span> <span class="kn">import</span> <span class="n">CSVStorage</span><span class="p">,</span> <span class="n">StorageConfig</span>

<span class="c1"># Initialize storage</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">StorageConfig</span><span class="p">(</span><span class="n">data_path</span><span class="o">=</span><span class="s2">&quot;data/ohlcv&quot;</span><span class="p">)</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">CSVStorage</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

<span class="c1"># Store data</span>
<span class="n">candles</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2025-01-15T10:00:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">65000.0</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">65100.0</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">64900.0</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">65050.0</span><span class="p">,</span>
        <span class="s2">&quot;volume&quot;</span><span class="p">:</span> <span class="mf">12.345</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">store_candles</span><span class="p">(</span><span class="s2">&quot;binance&quot;</span><span class="p">,</span> <span class="s2">&quot;BTC/USDT&quot;</span><span class="p">,</span> <span class="s2">&quot;1h&quot;</span><span class="p">,</span> <span class="n">candles</span><span class="p">)</span>

<span class="c1"># Load data</span>
<span class="n">df</span> <span class="o">=</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">load_candles</span><span class="p">(</span>
    <span class="s2">&quot;binance&quot;</span><span class="p">,</span> <span class="s2">&quot;BTC/USDT&quot;</span><span class="p">,</span> <span class="s2">&quot;1h&quot;</span><span class="p">,</span>
    <span class="n">start_time</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
    <span class="n">end_time</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>

<h3>2. Data Loader (<code>src/data/data_loader.py</code>)</h3>
<p>High-level interface for loading data with various filtering options.</p>
<p><strong>Key Methods:</strong>
- <code>load_data()</code> - Load data for specific exchange/pair/interval
- <code>load_multiple_pairs()</code> - Load data for multiple combinations
- <code>load_recent_data()</code> - Load recent data for the last N days
- <code>get_available_data()</code> - Get summary of available data</p>
<p><strong>Example:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">src.data.data_loader</span> <span class="kn">import</span> <span class="n">DataLoader</span>

<span class="c1"># Initialize loader</span>
<span class="n">loader</span> <span class="o">=</span> <span class="n">DataLoader</span><span class="p">(</span><span class="s2">&quot;data/ohlcv&quot;</span><span class="p">)</span>

<span class="c1"># Load specific data</span>
<span class="n">df</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span>
    <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance&quot;</span><span class="p">,</span>
    <span class="n">pair</span><span class="o">=</span><span class="s2">&quot;BTC/USDT&quot;</span><span class="p">,</span>
    <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;2025-01-01&quot;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;2025-01-31&quot;</span>
<span class="p">)</span>

<span class="c1"># Load multiple pairs</span>
<span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_multiple_pairs</span><span class="p">(</span>
    <span class="n">exchanges</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;binance&quot;</span><span class="p">,</span> <span class="s2">&quot;bitget&quot;</span><span class="p">],</span>
    <span class="n">pairs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;BTC/USDT&quot;</span><span class="p">,</span> <span class="s2">&quot;ETH/USDT&quot;</span><span class="p">],</span>
    <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;2025-01-01&quot;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;2025-01-31&quot;</span>
<span class="p">)</span>
</code></pre></div>

<h3>3. Data Fetcher (<code>scripts/fetch_to_csv.py</code>)</h3>
<p>Script for fetching historical data from exchanges and storing in CSV format.</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>scripts/fetch_to_csv.py
</code></pre></div>

<p><strong>Configuration:</strong>
- Edit the script to modify exchanges, pairs, timeframes, and date ranges
- Supports all major exchanges via CCXT library
- Automatic rate limiting and error handling</p>
<h3>4. Daily Fetcher (<code>scripts/daily_fetch.py</code>)</h3>
<p>Automated script for daily data fetching with your preferred exchanges and pairs.</p>
<p><strong>Features:</strong>
- Decentralized Exchanges: Drift Protocol, Jupiter, Raydium, Orca (Solana DEXs)
- Multi-Chain DEXs: Uniswap, PancakeSwap, SushiSwap
- Centralized Exchanges: Bitget, Binance, Coinbase, MEXC, KuCoin, Kraken
- 44 trading pairs including major cryptocurrencies and meme coins
- 6 timeframes: 1m, 5m, 15m, 1h, 4h, 1d
- Automatic error handling and retry logic
- Progress tracking and comprehensive logging</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>scripts/daily_fetch.py
</code></pre></div>

<h3>5. Cron Setup (<code>scripts/setup_daily_fetch.sh</code>)</h3>
<p>Shell script to set up automated daily fetching using cron jobs.</p>
<p><strong>Usage:</strong></p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Install daily fetch cron job</span>
bash<span class="w"> </span>scripts/setup_daily_fetch.sh<span class="w"> </span>install

<span class="c1"># Check status</span>
bash<span class="w"> </span>scripts/setup_daily_fetch.sh<span class="w"> </span>status

<span class="c1"># Remove cron job</span>
bash<span class="w"> </span>scripts/setup_daily_fetch.sh<span class="w"> </span>remove
</code></pre></div>

<h2>Configuration</h2>
<h3>Exchanges and Pairs</h3>
<p>The daily fetcher is configured with your preferred exchanges and pairs:</p>
<p><strong>Exchanges:</strong>
- Decentralized: Drift Protocol, Jupiter, Raydium, Orca (Solana DEXs)
- Multi-Chain DEXs: Uniswap, PancakeSwap, SushiSwap
- Centralized: Bitget, Binance, Coinbase, MEXC, KuCoin, Kraken</p>
<p><strong>Pairs (44 total):</strong>
- Major: BTC, ETH, SOL, XRP, ADA, LINK, AVAX, BNB
- DeFi: UNI, AAVE, CAKE, ORCA, JUP, DRIFT
- Meme: PEPE, DOGE, SHIB, FLOKI, BRETT, WIF, BOME
- And many more...</p>
<p><strong>Timeframes:</strong>
- 1m, 5m, 15m, 1h, 4h, 1d</p>
<h3>Storage Configuration</h3>
<p>The <code>StorageConfig</code> class allows customization:</p>
<div class="codehilite"><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">StorageConfig</span><span class="p">:</span>
    <span class="n">data_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;data/ohlcv&quot;</span><span class="p">)</span>      <span class="c1"># Base storage path</span>
    <span class="n">use_compression</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>              <span class="c1"># Enable file compression</span>
    <span class="n">backup_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>               <span class="c1"># Enable backups</span>
    <span class="n">backup_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># Backup location</span>
</code></pre></div>

<h2>Usage Examples</h2>
<h3>1. Basic Data Loading</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">src.data.data_loader</span> <span class="kn">import</span> <span class="n">load_data</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1"># Load data for a specific range</span>
<span class="n">df</span> <span class="o">=</span> <span class="k">await</span> <span class="n">load_data</span><span class="p">(</span>
    <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance&quot;</span><span class="p">,</span>
    <span class="n">pair</span><span class="o">=</span><span class="s2">&quot;BTC/USDT&quot;</span><span class="p">,</span>
    <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;2025-01-01&quot;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;2025-01-31&quot;</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loaded </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2"> candles&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Price range: $</span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;low&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> - $</span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;high&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3>2. Multiple Pairs Loading</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">src.data.data_loader</span> <span class="kn">import</span> <span class="n">DataLoader</span>

<span class="n">loader</span> <span class="o">=</span> <span class="n">DataLoader</span><span class="p">()</span>

<span class="c1"># Load data for multiple exchanges and pairs</span>
<span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_multiple_pairs</span><span class="p">(</span>
    <span class="n">exchanges</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;binance&quot;</span><span class="p">,</span> <span class="s2">&quot;bitget&quot;</span><span class="p">],</span>
    <span class="n">pairs</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;BTC/USDT&quot;</span><span class="p">,</span> <span class="s2">&quot;ETH/USDT&quot;</span><span class="p">,</span> <span class="s2">&quot;SOL/USDT&quot;</span><span class="p">],</span>
    <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;2025-01-01&quot;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;2025-01-31&quot;</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s2"> candles&quot;</span><span class="p">)</span>
</code></pre></div>

<h3>3. Recent Data Loading</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">src.data.data_loader</span> <span class="kn">import</span> <span class="n">DataLoader</span>

<span class="n">loader</span> <span class="o">=</span> <span class="n">DataLoader</span><span class="p">()</span>

<span class="c1"># Load last 30 days of data</span>
<span class="n">df</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loader</span><span class="o">.</span><span class="n">load_recent_data</span><span class="p">(</span>
    <span class="n">exchange</span><span class="o">=</span><span class="s2">&quot;binance&quot;</span><span class="p">,</span>
    <span class="n">pair</span><span class="o">=</span><span class="s2">&quot;BTC/USDT&quot;</span><span class="p">,</span>
    <span class="n">interval</span><span class="o">=</span><span class="s2">&quot;1h&quot;</span><span class="p">,</span>
    <span class="n">days</span><span class="o">=</span><span class="mi">30</span>
<span class="p">)</span>
</code></pre></div>

<h3>4. Data Resampling</h3>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">src.data.csv_storage</span> <span class="kn">import</span> <span class="n">CSVStorage</span><span class="p">,</span> <span class="n">StorageConfig</span>

<span class="n">storage</span> <span class="o">=</span> <span class="n">CSVStorage</span><span class="p">(</span><span class="n">StorageConfig</span><span class="p">())</span>

<span class="c1"># Load 1-minute data</span>
<span class="n">df_1m</span> <span class="o">=</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">load_candles</span><span class="p">(</span>
    <span class="s2">&quot;binance&quot;</span><span class="p">,</span> <span class="s2">&quot;BTC/USDT&quot;</span><span class="p">,</span> <span class="s2">&quot;1m&quot;</span><span class="p">,</span>
    <span class="n">start_time</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">end_time</span><span class="o">=</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2025</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Resample to 1-hour</span>
<span class="n">df_1h</span> <span class="o">=</span> <span class="k">await</span> <span class="n">storage</span><span class="o">.</span><span class="n">resample_candles</span><span class="p">(</span><span class="n">df_1m</span><span class="p">,</span> <span class="s2">&quot;1h&quot;</span><span class="p">)</span>
</code></pre></div>

<h2>Testing</h2>
<h3>Test Scripts</h3>
<ol>
<li><strong><code>scripts/test_csv_storage.py</code></strong> - Test CSV storage functionality</li>
<li><strong><code>scripts/test_data_loader.py</code></strong> - Test data loader functionality</li>
<li><strong><code>scripts/test_simple_loader.py</code></strong> - Simple data loading test</li>
<li><strong><code>scripts/test_correct_pair.py</code></strong> - Test with correct pair formats</li>
</ol>
<h3>Running Tests</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test CSV storage</span>
python<span class="w"> </span>scripts/test_csv_storage.py

<span class="c1"># Test data loader</span>
python<span class="w"> </span>scripts/test_data_loader.py

<span class="c1"># Test simple loading</span>
python<span class="w"> </span>scripts/test_simple_loader.py
</code></pre></div>

<h2>Performance</h2>
<h3>Storage Efficiency</h3>
<ul>
<li><strong>Per-day files</strong>: Small, fast-to-read files</li>
<li><strong>Compression</strong>: Optional gzip compression for space savings</li>
<li><strong>Deduplication</strong>: Automatic removal of duplicate candles</li>
<li><strong>Indexing</strong>: Fast file-based access without database overhead</li>
</ul>
<h3>Loading Performance</h3>
<ul>
<li><strong>Parallel loading</strong>: Support for loading multiple files simultaneously</li>
<li><strong>Memory efficient</strong>: Load only requested date ranges</li>
<li><strong>Caching</strong>: Optional caching for frequently accessed data</li>
</ul>
<h2>Monitoring and Logging</h2>
<h3>Log Files</h3>
<ul>
<li><strong>Daily fetch logs</strong>: <code>logs/daily_fetch_YYYYMMDD.log</code></li>
<li><strong>Cron logs</strong>: <code>logs/cron.log</code></li>
<li><strong>Application logs</strong>: Console and file output</li>
</ul>
<h3>Data Integrity</h3>
<p>The system includes comprehensive data validation:</p>
<ul>
<li><strong>OHLC relationship checks</strong>: High ≥ max(Open, Close), Low ≤ min(Open, Close)</li>
<li><strong>Negative value detection</strong>: Warns about invalid price/volume data</li>
<li><strong>Missing value detection</strong>: Identifies gaps in data</li>
<li><strong>Duplicate detection</strong>: Removes duplicate timestamps</li>
</ul>
<h2>Migration from Database</h2>
<h3>Benefits of CSV Storage</h3>
<ol>
<li><strong>Unlimited storage</strong>: No database size limits</li>
<li><strong>Better performance</strong>: Direct file access vs. SQL queries</li>
<li><strong>Easier backup</strong>: Simple file copying</li>
<li><strong>No network dependencies</strong>: Works offline</li>
<li><strong>Cost effective</strong>: No database hosting costs</li>
<li><strong>Data portability</strong>: Easy to move between systems</li>
</ol>
<h3>Migration Process</h3>
<ol>
<li><strong>Export existing data</strong> from database</li>
<li><strong>Convert to CSV format</strong> using the storage system</li>
<li><strong>Update scripts</strong> to use CSV storage instead of database</li>
<li><strong>Test thoroughly</strong> with new system</li>
<li><strong>Deploy and monitor</strong></li>
</ol>
<h2>Troubleshooting</h2>
<h3>Common Issues</h3>
<ol>
<li><strong>No data found</strong>: Check file paths and pair formats</li>
<li><strong>Import errors</strong>: Ensure <code>src/</code> is in Python path</li>
<li><strong>Permission errors</strong>: Check file/directory permissions</li>
<li><strong>Memory issues</strong>: Load smaller date ranges for large datasets</li>
</ol>
<h3>Debug Mode</h3>
<p>Enable debug logging for detailed troubleshooting:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</code></pre></div>

<h2>Future Enhancements</h2>
<h3>Planned Features</h3>
<ol>
<li><strong>Data compression</strong>: Automatic gzip compression for old data</li>
<li><strong>Backup system</strong>: Automated backups to cloud storage</li>
<li><strong>Data validation</strong>: Enhanced integrity checks</li>
<li><strong>Performance optimization</strong>: Parallel processing for large datasets</li>
<li><strong>Web interface</strong>: Dashboard for data management</li>
<li><strong>Real-time updates</strong>: WebSocket integration for live data</li>
</ol>
<h3>Extensibility</h3>
<p>The system is designed to be easily extensible:</p>
<ul>
<li><strong>New exchanges</strong>: Add to CCXT configuration</li>
<li><strong>New pairs</strong>: Update pair lists</li>
<li><strong>New timeframes</strong>: Add to timeframe configuration</li>
<li><strong>Custom storage</strong>: Extend StorageConfig for custom backends</li>
</ul>
<h2>Support</h2>
<p>For issues and questions:</p>
<ol>
<li>Check the logs in <code>logs/</code> directory</li>
<li>Run test scripts to verify functionality</li>
<li>Review this documentation</li>
<li>Check file permissions and paths</li>
<li>Verify Python dependencies are installed</li>
</ol>
<h2>Conclusion</h2>
<p>The CSV Storage System provides a robust, scalable solution for candlestick data management. It offers better performance than database storage while maintaining data integrity and providing comprehensive tools for data fetching, loading, and analysis.</p>
<p>The system is production-ready and includes automated daily fetching, comprehensive error handling, and extensive testing capabilities. </p>
    </div>
</body>
</html>