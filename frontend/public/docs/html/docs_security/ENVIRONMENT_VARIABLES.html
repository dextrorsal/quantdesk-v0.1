<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment Variables - QuantDesk Documentation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        body {
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            line-height: 1.6;
            color: #ffffff;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #000000;
            font-size: 14px;
        }
        .container {
            background: #000000;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #333333;
        }
        .back-link {
            margin-bottom: 20px;
        }
        .back-link a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        .back-link a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #ffffff;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        h1 {
            border-bottom: 2px solid #333333;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #333333;
            padding-bottom: 8px;
        }
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            color: #ffffff;
            border: 1px solid #333333;
        }
        pre {
            background: #0a0a0a;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #333333;
            margin: 20px 0;
        }
        pre code {
            background: none;
            padding: 0;
            color: #ffffff;
            border: none;
        }
        blockquote {
            border-left: 4px solid #3b82f6;
            margin: 0;
            padding-left: 20px;
            color: #d9d9d9;
            background: #1a1a1a;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            border: 1px solid #333333;
        }
        th, td {
            border: 1px solid #333333;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #1a1a1a;
            font-weight: bold;
            color: #ffffff;
        }
        td {
            color: #d9d9d9;
        }
        ul, ol {
            color: #d9d9d9;
        }
        li {
            margin-bottom: 8px;
        }
        a {
            color: #3b82f6;
            text-decoration: none;
        }
        a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        /* Syntax Highlighting Overrides */
        pre[class*="language-"] {
            background: #0a0a0a !important;
            border: 1px solid #333333 !important;
            border-radius: 8px !important;
            padding: 20px !important;
            margin: 20px 0 !important;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace !important;
            font-size: 13px !important;
            line-height: 1.5 !important;
        }
        .token.comment { color: #6a9955 !important; }
        .token.keyword { color: #569cd6 !important; }
        .token.string { color: #ce9178 !important; }
        .token.number { color: #b5cea8 !important; }
        .token.function { color: #dcdcaa !important; }
        .token.class-name { color: #4ec9b0 !important; }
        .token.operator { color: #d4d4d4 !important; }
        .token.punctuation { color: #d4d4d4 !important; }
        .token.variable { color: #9cdcfe !important; }
        .token.constant { color: #4fc1ff !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="back-link">
            <a href="/docs">&larr; Back to Documentation</a>
        </div>
        <h1>Environment Variables Guide for QuantDesk</h1>
<h2>Overview</h2>
<p>This document describes the environment variables used in the QuantDesk project and provides guidelines for managing them effectively.</p>
<h2>Environment Files</h2>
<p>The project uses multiple environment files for different purposes:</p>
<ul>
<li><code>.env</code> - Main environment file (not committed to git)</li>
<li><code>env.example</code> - Template file with example values</li>
<li><code>data-ingestion/.env</code> - Data ingestion service specific variables</li>
<li><code>data-ingestion/env.example</code> - Data ingestion template</li>
</ul>
<h2>Naming Conventions</h2>
<h3>Standard Format</h3>
<ul>
<li>Use UPPERCASE letters</li>
<li>Use underscores to separate words</li>
<li>Prefix with service name when applicable</li>
</ul>
<h3>Examples</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># ✅ Good</span>
<span class="nv">QUANTDESK_API_URL</span><span class="o">=</span>https://api.quantdesk.com
<span class="nv">DATABASE_URL</span><span class="o">=</span>postgresql://user:pass@localhost:5432/quantdesk
<span class="nv">REDIS_URL</span><span class="o">=</span>redis://localhost:6379

<span class="c1"># ❌ Bad</span>
<span class="nv">quantdesk_api_url</span><span class="o">=</span>https://api.quantdesk.com
DATABASE-URL<span class="o">=</span>postgresql://user:pass@localhost:5432/quantdesk
</code></pre></div>

<h2>Required Variables</h2>
<h3>Core Application</h3>
<ul>
<li><code>DATABASE_URL</code> - PostgreSQL connection string</li>
<li><code>REDIS_URL</code> - Redis connection string</li>
<li><code>JWT_SECRET</code> - Secret key for JWT tokens</li>
<li><code>NODE_ENV</code> - Environment (development, production)</li>
</ul>
<h3>Solana Integration</h3>
<ul>
<li><code>SOLANA_NETWORK</code> - Network (devnet, mainnet-beta)</li>
<li><code>RPC_URL</code> - Solana RPC endpoint</li>
<li><code>PYTH_NETWORK_URL</code> - Pyth network endpoint</li>
</ul>
<h3>External Services</h3>
<ul>
<li><code>SUPABASE_URL</code> - Supabase project URL</li>
<li><code>SUPABASE_SERVICE_ROLE_KEY</code> - Supabase service role key</li>
</ul>
<h2>Security Best Practices</h2>
<ol>
<li><strong>Never commit sensitive values</strong> to version control</li>
<li><strong>Use strong, unique secrets</strong> for JWT_SECRET</li>
<li><strong>Rotate secrets regularly</strong> in production</li>
<li><strong>Use environment-specific values</strong> for different deployments</li>
<li><strong>Validate all environment variables</strong> at startup</li>
</ol>
<h2>Validation Tools</h2>
<p>The project includes several tools for managing environment variables:</p>
<h3>1. Environment Scanner</h3>
<div class="codehilite"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>env:scan
</code></pre></div>

<p>Scans for duplicates, similar names, and format issues.</p>
<h3>2. Environment Validator</h3>
<div class="codehilite"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>env:validate
</code></pre></div>

<p>Validates environment variables and checks for common issues.</p>
<h3>3. dotenv-linter</h3>
<div class="codehilite"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>env:lint
</code></pre></div>

<p>Lints .env files for formatting and best practices.</p>
<h3>4. Combined Check</h3>
<div class="codehilite"><pre><span></span><code>npm<span class="w"> </span>run<span class="w"> </span>env:check
</code></pre></div>

<p>Runs all environment variable checks.</p>
<h2>Common Issues</h2>
<h3>Duplicate Variables</h3>
<p>Having the same variable in multiple files can cause confusion:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ❌ Problem</span>
<span class="c1"># .env</span>
<span class="nv">QUANTDESK_URL</span><span class="o">=</span>https://app.quantdesk.com

<span class="c1"># data-ingestion/.env</span>
<span class="nv">QUANTDESK_URL</span><span class="o">=</span>https://api.quantdesk.com
</code></pre></div>

<h3>Similar Names</h3>
<p>Variables with similar names can cause confusion:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ❌ Problem</span>
<span class="nv">QUANTDESK_URL</span><span class="o">=</span>https://app.quantdesk.com
<span class="nv">QUANTDESK_API_URL</span><span class="o">=</span>https://api.quantdesk.com
</code></pre></div>

<h3>Inconsistent Naming</h3>
<p>Different naming conventions can cause issues:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># ❌ Problem</span>
<span class="nv">DATABASE_URL</span><span class="o">=</span>postgresql://...
<span class="nv">DB_CONNECTION_STRING</span><span class="o">=</span>postgresql://...
</code></pre></div>

<h2>Troubleshooting</h2>
<h3>Variable Not Found</h3>
<p>If an environment variable is not found:
1. Check if it's defined in the correct .env file
2. Verify the variable name matches exactly
3. Ensure the .env file is in the correct location
4. Restart the application after making changes</p>
<h3>Duplicate Variables</h3>
<p>If you have duplicate variables:
1. Use the environment scanner to identify them
2. Choose one canonical location for each variable
3. Remove duplicates from other files
4. Update code to reference the canonical variable</p>
<h3>Similar Names</h3>
<p>If you have similar variable names:
1. Use the environment scanner to identify them
2. Choose a consistent naming convention
3. Rename variables to follow the convention
4. Update code to use the new names</p>
<h2>Best Practices</h2>
<ol>
<li><strong>Use consistent naming</strong> across all environment files</li>
<li><strong>Document all variables</strong> in this file</li>
<li><strong>Validate variables</strong> at application startup</li>
<li><strong>Use type validation</strong> for numeric and boolean values</li>
<li><strong>Provide default values</strong> where appropriate</li>
<li><strong>Use environment-specific files</strong> for different deployments</li>
</ol>
<h2>Tools and Scripts</h2>
<ul>
<li><code>scripts/env-scanner.sh</code> - Comprehensive environment variable scanner</li>
<li><code>scripts/validate-env.js</code> - Node.js environment variable validator</li>
<li><code>scripts/install-env-tools.sh</code> - Install environment variable tools</li>
</ul>
<h2>References</h2>
<ul>
<li><a href="https://github.com/dotenv-linter/dotenv-linter">dotenv-linter Documentation</a></li>
<li><a href="https://nodejs.org/en/learn/command-line/how-to-read-environment-variables-from-nodejs">Node.js Environment Variables</a></li>
<li><a href="https://12factor.net/config">Environment Variables Best Practices</a></li>
</ul>
    </div>
</body>
</html>