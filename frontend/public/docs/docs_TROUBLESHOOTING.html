<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Troubleshooting - QuantDesk Documentation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        body {
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            line-height: 1.6;
            color: #ffffff;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #000000;
            font-size: 14px;
        }
        .container {
            background: #000000;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #333333;
        }
        .back-link {
            margin-bottom: 20px;
        }
        .back-link a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        .back-link a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #ffffff;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        h1 {
            border-bottom: 2px solid #333333;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #333333;
            padding-bottom: 8px;
        }
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            color: #ffffff;
            border: 1px solid #333333;
        }
        pre {
            background: #0a0a0a;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #333333;
            margin: 20px 0;
        }
        pre code {
            background: none;
            padding: 0;
            color: #ffffff;
            border: none;
        }
        blockquote {
            border-left: 4px solid #3b82f6;
            margin: 0;
            padding-left: 20px;
            color: #d9d9d9;
            background: #1a1a1a;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            border: 1px solid #333333;
        }
        th, td {
            border: 1px solid #333333;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #1a1a1a;
            font-weight: bold;
            color: #ffffff;
        }
        td {
            color: #d9d9d9;
        }
        ul, ol {
            color: #d9d9d9;
        }
        li {
            margin-bottom: 8px;
        }
        a {
            color: #3b82f6;
            text-decoration: none;
        }
        a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        /* Syntax Highlighting Overrides */
        pre[class*="language-"] {
            background: #0a0a0a !important;
            border: 1px solid #333333 !important;
            border-radius: 8px !important;
            padding: 20px !important;
            margin: 20px 0 !important;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace !important;
            font-size: 13px !important;
            line-height: 1.5 !important;
        }
        .token.comment { color: #6a9955 !important; }
        .token.keyword { color: #569cd6 !important; }
        .token.string { color: #ce9178 !important; }
        .token.number { color: #b5cea8 !important; }
        .token.function { color: #dcdcaa !important; }
        .token.class-name { color: #4ec9b0 !important; }
        .token.operator { color: #d4d4d4 !important; }
        .token.punctuation { color: #d4d4d4 !important; }
        .token.variable { color: #9cdcfe !important; }
        .token.constant { color: #4fc1ff !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="back-link">
            <a href="/">&larr; Back to Documentation</a>
        </div>
        <h1>üõ†Ô∏è Troubleshooting Guide</h1>
<p><em>What is this doc?</em><br />
This guide covers common issues and solutions for running the ML-MODEL system, including database, API, and data quality problems. It's for anyone running, debugging, or maintaining the system.</p>
<p><a href="NEON_PIPELINE.html">Neon Pipeline</a> | <a href="MODEL_TRAINING.html">Model Training</a> | <a href="../README.html">Project README</a></p>
<h2>Database Issues</h2>
<h3>PostgreSQL Permission Errors</h3>
<p><strong>Symptom:</strong> Errors like <code>permission denied for schema public</code> or <code>permission denied for database</code></p>
<p><strong>Solution:</strong>
1. Grant superuser privileges to your database user:</p>
<div class="codehilite"><pre><span></span><code><span class="k">ALTER</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="n">your_username</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="n">SUPERUSER</span><span class="p">;</span>
</code></pre></div>

<ol>
<li>Grant privileges to the public schema:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="k">GRANT</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">your_username</span><span class="p">;</span>
</code></pre></div>

<ol>
<li>Check database ownership and permissions:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="err">\</span><span class="n">l</span><span class="w">  </span><span class="c1">-- List databases and owners</span>
<span class="err">\</span><span class="n">dn</span><span class="w"> </span><span class="c1">-- List schemas</span>
</code></pre></div>

<h3>Connection Issues</h3>
<p><strong>Symptom:</strong> <code>could not connect to server</code> or <code>connection refused</code></p>
<p><strong>Solution:</strong>
1. Check if PostgreSQL service is running:</p>
<div class="codehilite"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>postgresql
</code></pre></div>

<ol>
<li>Verify connection settings in your configuration file</li>
<li>Check host, port, username, and password</li>
<li>For Neon DB, verify your API token is valid and has appropriate permissions</li>
</ol>
<h2>Binance API Issues</h2>
<h3>Rate Limiting</h3>
<p><strong>Symptom:</strong> HTTP status code 429 or error messages about exceeding rate limits</p>
<p><strong>Solution:</strong>
1. Implement exponential backoff for API calls
2. Reduce frequency of requests
3. Use WebSockets instead of REST API for real-time data when possible
4. Consider upgrading API key limits if available</p>
<h3>Connection Drops</h3>
<p><strong>Symptom:</strong> Frequent disconnections from the Binance API</p>
<p><strong>Solution:</strong>
1. Check your network stability
2. If using a VPN, try a different server location
3. Implement proper error handling and reconnection logic
4. Log detailed error messages to identify patterns</p>
<h2>WebSocket Issues</h2>
<h3>Connection Failures</h3>
<p><strong>Symptom:</strong> Failed to establish WebSocket connection or frequent disconnections</p>
<p><strong>Solution:</strong>
1. Verify network allows WebSocket traffic (some corporate firewalls block it)
2. Implement proper ping/pong handling (required by Binance):</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span> <span class="nf">on_ping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wsapp</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Respond to ping with same payload in pong frame&quot;&quot;&quot;</span>
    <span class="n">wsapp</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">websocket</span><span class="o">.</span><span class="n">ABNF</span><span class="o">.</span><span class="n">OPCODE_PONG</span><span class="p">)</span>
</code></pre></div>

<ol>
<li>Log connection events and errors at DEBUG level for troubleshooting:</li>
</ol>
<div class="codehilite"><pre><span></span><code><span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;websocket&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
</code></pre></div>

<h3>Data Streaming Stops</h3>
<p><strong>Symptom:</strong> Connected but not receiving new data</p>
<p><strong>Solution:</strong>
1. Implement a heartbeat check to verify connection is alive
2. Automatically reconnect if no messages received within a timeframe
3. Ensure you're responding to ping frames correctly
4. Verify subscription to the correct streams:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Example correct subscription message</span>
<span class="n">ws</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;SUBSCRIBE&quot;</span><span class="p">,</span>
    <span class="s2">&quot;params&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;solusdt@kline_1m&quot;</span><span class="p">],</span>
    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}))</span>
</code></pre></div>

<h2>Python Library Issues</h2>
<h3>Missing Dependencies</h3>
<p><strong>Symptom:</strong> <code>ModuleNotFoundError</code> or <code>ImportError</code></p>
<p><strong>Solution:</strong>
1. Install required packages:</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>

<ol>
<li>For specific data collection tests:</li>
</ol>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>tests/data/requirements-data-tests.txt
</code></pre></div>

<ol>
<li>Check for version conflicts with:</li>
</ol>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>check
</code></pre></div>

<h3>Asyncio Issues</h3>
<p><strong>Symptom:</strong> Event loop errors or coroutine never finishes</p>
<p><strong>Solution:</strong>
1. Use the correct async/await patterns
2. Avoid mixing synchronous and asynchronous code
3. Properly close resources and connections:</p>
<div class="codehilite"><pre><span></span><code><span class="k">try</span><span class="p">:</span>
    <span class="c1"># Your async code</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>

<h2>Data Quality Issues</h2>
<h3>Missing Data Points</h3>
<p><strong>Symptom:</strong> Gaps in time series data or inconsistent intervals</p>
<p><strong>Solution:</strong>
1. Implement data validation checks
2. Add logic to detect and retry for missing data
3. Consider using cache to handle temporary outages
4. Add monitoring for data quality metrics</p>
<h3>Invalid Prices</h3>
<p><strong>Symptom:</strong> Extreme price values or zeros in data</p>
<p><strong>Solution:</strong>
1. Implement validation checks (e.g., price within expected range)
2. Add outlier detection and handling
3. Compare data from multiple sources when possible</p>
<h2>Getting Help</h2>
<p>If you're still experiencing issues after trying these solutions:</p>
<ol>
<li>Check the project's GitHub issues for similar problems</li>
<li>Enable detailed logging and share logs when asking for help</li>
<li>Include specific error messages and context</li>
</ol>
<h2>Contributing Solutions</h2>
<p>Found a solution to a common problem? Please contribute to this guide by:</p>
<ol>
<li>Opening a pull request with your solution</li>
<li>Adding detailed step-by-step instructions</li>
<li>Including code examples where appropriate </li>
</ol>
<h2>See Also</h2>
<ul>
<li><a href="../README.html">Project README</a> ‚Äî Project overview and structure</li>
<li><a href="NEON_PIPELINE.html">Neon Data Pipeline</a> ‚Äî Database and data flow details</li>
<li><a href="MODEL_TRAINING.html">Model Training Guide</a> ‚Äî Training and evaluation troubleshooting</li>
<li><a href="../src/data/pipeline/neon_collector.py">src/data/pipeline/neon_collector.py</a> ‚Äî Data collector code</li>
<li><a href="../scripts/train_model.py">scripts/train_model.py</a> ‚Äî Training script</li>
<li><a href="../scripts/dashboard/model_dashboard.py">scripts/dashboard/model_dashboard.py</a> ‚Äî Dashboard troubleshooting </li>
</ul>
    </div>
</body>
</html>