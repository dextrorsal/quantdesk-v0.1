<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Guide - QuantDesk Documentation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        body {
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            line-height: 1.6;
            color: #ffffff;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #000000;
            font-size: 14px;
        }
        .container {
            background: #000000;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #333333;
        }
        .back-link {
            margin-bottom: 20px;
        }
        .back-link a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        .back-link a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #ffffff;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        h1 {
            border-bottom: 2px solid #333333;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #333333;
            padding-bottom: 8px;
        }
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            color: #ffffff;
            border: 1px solid #333333;
        }
        pre {
            background: #0a0a0a;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #333333;
            margin: 20px 0;
        }
        pre code {
            background: none;
            padding: 0;
            color: #ffffff;
            border: none;
        }
        blockquote {
            border-left: 4px solid #3b82f6;
            margin: 0;
            padding-left: 20px;
            color: #d9d9d9;
            background: #1a1a1a;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            border: 1px solid #333333;
        }
        th, td {
            border: 1px solid #333333;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #1a1a1a;
            font-weight: bold;
            color: #ffffff;
        }
        td {
            color: #d9d9d9;
        }
        ul, ol {
            color: #d9d9d9;
        }
        li {
            margin-bottom: 8px;
        }
        a {
            color: #3b82f6;
            text-decoration: none;
        }
        a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        /* Syntax Highlighting Overrides */
        pre[class*="language-"] {
            background: #0a0a0a !important;
            border: 1px solid #333333 !important;
            border-radius: 8px !important;
            padding: 20px !important;
            margin: 20px 0 !important;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace !important;
            font-size: 13px !important;
            line-height: 1.5 !important;
        }
        .token.comment { color: #6a9955 !important; }
        .token.keyword { color: #569cd6 !important; }
        .token.string { color: #ce9178 !important; }
        .token.number { color: #b5cea8 !important; }
        .token.function { color: #dcdcaa !important; }
        .token.class-name { color: #4ec9b0 !important; }
        .token.operator { color: #d4d4d4 !important; }
        .token.punctuation { color: #d4d4d4 !important; }
        .token.variable { color: #9cdcfe !important; }
        .token.constant { color: #4fc1ff !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="back-link">
            <a href="/">&larr; Back to Documentation</a>
        </div>
        <h1>Testing Guide</h1>
<p>This guide provides comprehensive instructions for testing different components of the QuantDesk system.</p>
<h2>Backend Testing</h2>
<h3>Compilation Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Navigate to backend directory</span>
<span class="nb">cd</span><span class="w"> </span>backend

<span class="c1"># Install dependencies</span>
pnpm<span class="w"> </span>install

<span class="c1"># Compile TypeScript</span>
pnpm<span class="w"> </span>run<span class="w"> </span>build

<span class="c1"># Check for TypeScript errors</span>
pnpm<span class="w"> </span>run<span class="w"> </span>type-check
</code></pre></div>

<h3>Development Server Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Start development server</span>
pnpm<span class="w"> </span>run<span class="w"> </span>start:dev

<span class="c1"># Check if server is running</span>
curl<span class="w"> </span>http://localhost:3002/health

<span class="c1"># Test API endpoints</span>
curl<span class="w"> </span>http://localhost:3002/api/dev/codebase-structure
curl<span class="w"> </span>http://localhost:3002/api/dev/market-summary
curl<span class="w"> </span>http://localhost:3002/api/docs/swagger
</code></pre></div>

<h3>Endpoint Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test markets endpoint</span>
curl<span class="w"> </span>http://localhost:3002/api/markets

<span class="c1"># Test oracle prices</span>
curl<span class="w"> </span>http://localhost:3002/api/oracle/prices

<span class="c1"># Test user endpoints</span>
curl<span class="w"> </span>http://localhost:3002/api/users

<span class="c1"># Test with authentication</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer YOUR_TOKEN&quot;</span><span class="w"> </span>http://localhost:3002/api/users/profile
</code></pre></div>

<h3>Database Integration Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test database connection</span>
curl<span class="w"> </span>http://localhost:3002/api/dev/codebase-structure

<span class="c1"># Check for expected errors (non-critical for devnet)</span>
<span class="c1"># These errors are expected:</span>
<span class="c1"># - &quot;Could not find the function public.execute_sql&quot;</span>
<span class="c1"># - &quot;Could not find the table auth_nonces&quot;</span>
</code></pre></div>

<h3>Error Handling Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test invalid endpoints</span>
curl<span class="w"> </span>http://localhost:3002/api/invalid-endpoint

<span class="c1"># Test with invalid parameters</span>
curl<span class="w"> </span>http://localhost:3002/api/users/invalid-id

<span class="c1"># Test rate limiting</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..100<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>curl<span class="w"> </span>http://localhost:3002/api/markets<span class="p">;</span><span class="w"> </span><span class="k">done</span>
</code></pre></div>

<h2>Smart Contract Testing</h2>
<h3>Compilation Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Navigate to contracts directory</span>
<span class="nb">cd</span><span class="w"> </span>contracts

<span class="c1"># Install dependencies</span>
pnpm<span class="w"> </span>install

<span class="c1"># Build contracts</span>
anchor<span class="w"> </span>build

<span class="c1"># Check for Rust compilation errors</span>
cargo<span class="w"> </span>check
</code></pre></div>

<h3>Local Devnet Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Start local Solana validator</span>
solana-test-validator

<span class="c1"># Deploy contracts to local devnet</span>
anchor<span class="w"> </span>deploy

<span class="c1"># Run tests</span>
anchor<span class="w"> </span><span class="nb">test</span>

<span class="c1"># Check program ID</span>
solana<span class="w"> </span>program<span class="w"> </span>show<span class="w"> </span>PROGRAM_ID
</code></pre></div>

<h3>Contract Interaction Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test contract initialization</span>
anchor<span class="w"> </span>run<span class="w"> </span>test-initialize

<span class="c1"># Test position opening</span>
anchor<span class="w"> </span>run<span class="w"> </span>test-open-position

<span class="c1"># Test position closing</span>
anchor<span class="w"> </span>run<span class="w"> </span>test-close-position
</code></pre></div>

<h3>Rust Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Run Rust unit tests</span>
cargo<span class="w"> </span><span class="nb">test</span>

<span class="c1"># Run integration tests</span>
cargo<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--test<span class="w"> </span>integration

<span class="c1"># Run with verbose output</span>
cargo<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--<span class="w"> </span>--nocapture
</code></pre></div>

<h2>Frontend Testing</h2>
<h3>Development Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Navigate to frontend directory</span>
<span class="nb">cd</span><span class="w"> </span>frontend

<span class="c1"># Install dependencies</span>
pnpm<span class="w"> </span>install

<span class="c1"># Start development server</span>
pnpm<span class="w"> </span>run<span class="w"> </span>dev

<span class="c1"># Check if frontend is running</span>
curl<span class="w"> </span>http://localhost:3001

<span class="c1"># Test in browser</span>
open<span class="w"> </span>http://localhost:3001
</code></pre></div>

<h3>Build Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Build for production</span>
pnpm<span class="w"> </span>run<span class="w"> </span>build

<span class="c1"># Check build output</span>
ls<span class="w"> </span>-la<span class="w"> </span>dist/

<span class="c1"># Test production build locally</span>
pnpm<span class="w"> </span>run<span class="w"> </span>preview
</code></pre></div>

<h3>Component Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Run component tests</span>
pnpm<span class="w"> </span>run<span class="w"> </span><span class="nb">test</span>

<span class="c1"># Run tests in watch mode</span>
pnpm<span class="w"> </span>run<span class="w"> </span>test:watch

<span class="c1"># Run tests with coverage</span>
pnpm<span class="w"> </span>run<span class="w"> </span>test:coverage
</code></pre></div>

<h2>Integration Testing</h2>
<h3>End-to-End Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Start all services</span>
npm<span class="w"> </span>run<span class="w"> </span>dev

<span class="c1"># Test complete flow</span>
<span class="c1"># 1. Frontend loads</span>
<span class="c1"># 2. Backend API responds</span>
<span class="c1"># 3. Database queries work</span>
<span class="c1"># 4. Oracle prices fetch</span>
<span class="c1"># 5. Smart contract interaction</span>
</code></pre></div>

<h3>API Integration Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test market data flow</span>
curl<span class="w"> </span>http://localhost:3002/api/markets<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq

<span class="c1"># Test oracle price flow</span>
curl<span class="w"> </span>http://localhost:3002/api/oracle/prices<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq

<span class="c1"># Test user authentication flow</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:3002/api/siws/verify<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;message&quot;: &quot;test&quot;, &quot;signature&quot;: &quot;test&quot;}&#39;</span>
</code></pre></div>

<h3>Database Integration Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test database operations</span>
curl<span class="w"> </span>http://localhost:3002/api/dev/codebase-structure<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq

<span class="c1"># Test market data</span>
curl<span class="w"> </span>http://localhost:3002/api/markets<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq

<span class="c1"># Test user data</span>
curl<span class="w"> </span>http://localhost:3002/api/users<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq
</code></pre></div>

<h2>Performance Testing</h2>
<h3>Load Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test API performance</span>
ab<span class="w"> </span>-n<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-c<span class="w"> </span><span class="m">10</span><span class="w"> </span>http://localhost:3002/api/markets

<span class="c1"># Test database performance</span>
ab<span class="w"> </span>-n<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-c<span class="w"> </span><span class="m">10</span><span class="w"> </span>http://localhost:3002/api/dev/codebase-structure

<span class="c1"># Test oracle performance</span>
ab<span class="w"> </span>-n<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-c<span class="w"> </span><span class="m">10</span><span class="w"> </span>http://localhost:3002/api/oracle/prices
</code></pre></div>

<h3>Memory Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Monitor memory usage</span>
ps<span class="w"> </span>aux<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>node

<span class="c1"># Check for memory leaks</span>
node<span class="w"> </span>--inspect<span class="w"> </span>backend/dist/server.js
</code></pre></div>

<h2>Security Testing</h2>
<h3>Authentication Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test without authentication</span>
curl<span class="w"> </span>http://localhost:3002/api/users/profile

<span class="c1"># Test with invalid token</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer invalid-token&quot;</span><span class="w"> </span>http://localhost:3002/api/users/profile

<span class="c1"># Test with valid token</span>
curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer valid-token&quot;</span><span class="w"> </span>http://localhost:3002/api/users/profile
</code></pre></div>

<h3>Input Validation Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Test SQL injection</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:3002/api/users?name=&#39;; DROP TABLE users; --&quot;</span>

<span class="c1"># Test XSS</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:3002/api/users?name=&lt;script&gt;alert(&#39;xss&#39;)&lt;/script&gt;&quot;</span>

<span class="c1"># Test parameter validation</span>
curl<span class="w"> </span><span class="s2">&quot;http://localhost:3002/api/users/invalid-id&quot;</span>
</code></pre></div>

<h2>Troubleshooting Common Issues</h2>
<h3>Port Conflicts</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check what&#39;s using port 3002</span>
lsof<span class="w"> </span>-ti:3002

<span class="c1"># Kill process if needed</span>
lsof<span class="w"> </span>-ti:3002<span class="w"> </span><span class="p">|</span><span class="w"> </span>xargs<span class="w"> </span><span class="nb">kill</span><span class="w"> </span>-9

<span class="c1"># Check all ports</span>
netstat<span class="w"> </span>-tulpn<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>:300
</code></pre></div>

<h3>Database Connection Issues</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check Supabase connection</span>
curl<span class="w"> </span>http://localhost:3002/api/dev/codebase-structure

<span class="c1"># Check environment variables</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$SUPABASE_URL</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$SUPABASE_ANON_KEY</span>

<span class="c1"># Test database directly</span>
psql<span class="w"> </span><span class="nv">$SUPABASE_URL</span>
</code></pre></div>

<h3>Smart Contract Issues</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check Solana CLI</span>
solana<span class="w"> </span>--version

<span class="c1"># Check Anchor CLI</span>
anchor<span class="w"> </span>--version

<span class="c1"># Check local validator</span>
solana-test-validator<span class="w"> </span>--help

<span class="c1"># Check program deployment</span>
solana<span class="w"> </span>program<span class="w"> </span>show<span class="w"> </span>PROGRAM_ID
</code></pre></div>

<h3>Frontend Issues</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check Node.js version</span>
node<span class="w"> </span>--version

<span class="c1"># Check pnpm version</span>
pnpm<span class="w"> </span>--version

<span class="c1"># Clear cache</span>
pnpm<span class="w"> </span>store<span class="w"> </span>prune

<span class="c1"># Reinstall dependencies</span>
rm<span class="w"> </span>-rf<span class="w"> </span>node_modules
pnpm<span class="w"> </span>install
</code></pre></div>

<h2>Testing Checklist</h2>
<h3>Backend Testing Checklist</h3>
<ul>
<li>[ ] TypeScript compilation succeeds</li>
<li>[ ] Server starts without errors</li>
<li>[ ] All API endpoints respond</li>
<li>[ ] Database queries work</li>
<li>[ ] Oracle prices fetch successfully</li>
<li>[ ] Error handling works correctly</li>
<li>[ ] Rate limiting functions properly</li>
<li>[ ] Authentication works</li>
<li>[ ] Input validation prevents attacks</li>
</ul>
<h3>Smart Contract Testing Checklist</h3>
<ul>
<li>[ ] Rust compilation succeeds</li>
<li>[ ] Anchor build succeeds</li>
<li>[ ] Contracts deploy to devnet</li>
<li>[ ] All instructions work correctly</li>
<li>[ ] Events emit properly</li>
<li>[ ] Error handling works</li>
<li>[ ] Account validation functions</li>
<li>[ ] Integration tests pass</li>
</ul>
<h3>Frontend Testing Checklist</h3>
<ul>
<li>[ ] React components render</li>
<li>[ ] API calls work</li>
<li>[ ] State management functions</li>
<li>[ ] Routing works</li>
<li>[ ] Styling applies correctly</li>
<li>[ ] Build succeeds</li>
<li>[ ] Production build works</li>
<li>[ ] Performance is acceptable</li>
</ul>
<h3>Integration Testing Checklist</h3>
<ul>
<li>[ ] All services start together</li>
<li>[ ] Frontend connects to backend</li>
<li>[ ] Backend connects to database</li>
<li>[ ] Backend fetches oracle prices</li>
<li>[ ] Smart contracts interact correctly</li>
<li>[ ] End-to-end flow works</li>
<li>[ ] Error handling is consistent</li>
<li>[ ] Performance meets requirements</li>
</ul>
<h2>Continuous Integration Testing</h2>
<h3>GitHub Actions Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># .github/workflows/test.yml</span>
<span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Test Suite</span>
<span class="nt">on</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">push</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">pull_request</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">test</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v2</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-node@v2</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">node-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;20&#39;</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pnpm install</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pnpm run test:backend</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pnpm run test:frontend</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pnpm run test:contracts</span>
</code></pre></div>

<h3>Local CI Testing</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Run all tests locally</span>
npm<span class="w"> </span>run<span class="w"> </span>test:all

<span class="c1"># Run specific test suites</span>
npm<span class="w"> </span>run<span class="w"> </span>test:backend
npm<span class="w"> </span>run<span class="w"> </span>test:frontend
npm<span class="w"> </span>run<span class="w"> </span>test:contracts
</code></pre></div>

<p>This testing guide should help you ensure all components of the QuantDesk system work correctly and reliably.</p>
    </div>
</body>
</html>