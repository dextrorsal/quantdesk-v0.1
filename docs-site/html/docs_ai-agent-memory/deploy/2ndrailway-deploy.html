<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2Ndrailway-Deploy - QuantDesk Documentation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        body {
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            line-height: 1.6;
            color: #ffffff;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #000000;
            font-size: 14px;
        }
        .container {
            background: #000000;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid #333333;
        }
        .back-link {
            margin-bottom: 20px;
        }
        .back-link a {
            color: #3b82f6;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }
        .back-link a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        h1, h2, h3, h4, h5, h6 {
            color: #ffffff;
            margin-top: 30px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        h1 {
            border-bottom: 2px solid #333333;
            padding-bottom: 10px;
        }
        h2 {
            border-bottom: 1px solid #333333;
            padding-bottom: 8px;
        }
        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace;
            color: #ffffff;
            border: 1px solid #333333;
        }
        pre {
            background: #0a0a0a;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            border: 1px solid #333333;
            margin: 20px 0;
        }
        pre code {
            background: none;
            padding: 0;
            color: #ffffff;
            border: none;
        }
        blockquote {
            border-left: 4px solid #3b82f6;
            margin: 0;
            padding-left: 20px;
            color: #d9d9d9;
            background: #1a1a1a;
            padding: 15px 20px;
            border-radius: 0 8px 8px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            border: 1px solid #333333;
        }
        th, td {
            border: 1px solid #333333;
            padding: 12px;
            text-align: left;
        }
        th {
            background: #1a1a1a;
            font-weight: bold;
            color: #ffffff;
        }
        td {
            color: #d9d9d9;
        }
        ul, ol {
            color: #d9d9d9;
        }
        li {
            margin-bottom: 8px;
        }
        a {
            color: #3b82f6;
            text-decoration: none;
        }
        a:hover {
            color: #60a5fa;
            text-decoration: underline;
        }
        /* Syntax Highlighting Overrides */
        pre[class*="language-"] {
            background: #0a0a0a !important;
            border: 1px solid #333333 !important;
            border-radius: 8px !important;
            padding: 20px !important;
            margin: 20px 0 !important;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', monospace !important;
            font-size: 13px !important;
            line-height: 1.5 !important;
        }
        .token.comment { color: #6a9955 !important; }
        .token.keyword { color: #569cd6 !important; }
        .token.string { color: #ce9178 !important; }
        .token.number { color: #b5cea8 !important; }
        .token.function { color: #dcdcaa !important; }
        .token.class-name { color: #4ec9b0 !important; }
        .token.operator { color: #d4d4d4 !important; }
        .token.punctuation { color: #d4d4d4 !important; }
        .token.variable { color: #9cdcfe !important; }
        .token.constant { color: #4fc1ff !important; }
    </style>
</head>
<body>
    <div class="container">
        <div class="back-link">
            <a href="/">&larr; Back to Documentation</a>
        </div>
        <h1>Railway Deployment Guide - QuantDesk Backend</h1>
<h2>Overview</h2>
<p>This document outlines the successful Docker-only deployment process for the QuantDesk backend to Railway platform. This deployment uses Docker containers exclusively, avoiding Railway's default Node.js buildpack.</p>
<h2>Prerequisites</h2>
<h3>Required Tools</h3>
<ul>
<li>Node.js 23.x.x (installed via nvm)</li>
<li>Railway CLI (<code>npm install -g @railway/cli</code>)</li>
<li>Docker (for local testing)</li>
<li>Git</li>
</ul>
<h3>Required Accounts</h3>
<ul>
<li>Railway account</li>
<li>GitHub account with repository access</li>
</ul>
<h2>Project Structure</h2>
<div class="codehilite"><pre><span></span><code><span class="nx">quantdesk</span><span class="o">/</span>
<span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="nx">backend</span><span class="o">/</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="nx">Dockerfile</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="nx">railway</span><span class="p">.</span><span class="nx">toml</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="p">.</span><span class="nx">railwayignore</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="kn">package</span><span class="p">.</span><span class="nx">json</span>
<span class="err">‚îÇ</span><span class="w">   </span><span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="nx">src</span><span class="o">/</span>
<span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="nx">railway</span><span class="p">.</span><span class="nx">toml</span><span class="w"> </span><span class="p">(</span><span class="nx">root</span><span class="p">)</span>
<span class="err">‚îú‚îÄ‚îÄ</span><span class="w"> </span><span class="p">.</span><span class="nx">railwayignore</span><span class="w"> </span><span class="p">(</span><span class="nx">root</span><span class="p">)</span>
<span class="err">‚îî‚îÄ‚îÄ</span><span class="w"> </span><span class="nx">docs</span><span class="o">/</span>
</code></pre></div>

<h2>Configuration Files</h2>
<h3>1. Root <code>railway.toml</code></h3>
<div class="codehilite"><pre><span></span><code><span class="k">[build]</span>
<span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;DOCKERFILE&quot;</span>
<span class="n">dockerfilePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;backend/Dockerfile&quot;</span>

<span class="k">[deploy]</span>
<span class="n">healthcheckPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/health&quot;</span>
<span class="n">healthcheckTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span>
<span class="n">restartPolicyType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ON_FAILURE&quot;</span>
<span class="n">restartPolicyMaxRetries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>

<span class="c1"># Force Docker deployment - use root context</span>
<span class="k">[build.docker]</span>
<span class="n">dockerfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;backend/Dockerfile&quot;</span>
<span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;.&quot;</span>
</code></pre></div>

<h3>2. Backend <code>railway.toml</code></h3>
<div class="codehilite"><pre><span></span><code><span class="k">[build]</span>
<span class="n">builder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;DOCKERFILE&quot;</span>
<span class="n">dockerfilePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Dockerfile&quot;</span>

<span class="k">[deploy]</span>
<span class="n">healthcheckPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/health&quot;</span>
<span class="n">healthcheckTimeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span>
<span class="n">restartPolicyType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ON_FAILURE&quot;</span>
<span class="n">restartPolicyMaxRetries</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
</code></pre></div>

<h3>3. Root <code>.railwayignore</code></h3>
<div class="codehilite"><pre><span></span><code><span class="err">#</span><span class="w"> </span><span class="nx">Ignore</span><span class="w"> </span><span class="nx">Node</span><span class="p">.</span><span class="nx">js</span><span class="w"> </span><span class="nx">specific</span><span class="w"> </span><span class="nx">files</span><span class="w"> </span><span class="nx">at</span><span class="w"> </span><span class="nx">the</span><span class="w"> </span><span class="nx">root</span><span class="w"> </span><span class="nx">to</span><span class="w"> </span><span class="nx">force</span><span class="w"> </span><span class="nx">Docker</span><span class="w"> </span><span class="nx">build</span>
<span class="nx">node_modules</span><span class="o">/</span>
<span class="kn">package</span><span class="p">.</span><span class="nx">json</span>
<span class="kn">package</span><span class="o">-</span><span class="nx">lock</span><span class="p">.</span><span class="nx">json</span>
<span class="nx">yarn</span><span class="p">.</span><span class="nx">lock</span>
<span class="p">.</span><span class="nx">env</span>
<span class="p">.</span><span class="nx">git</span><span class="o">/</span>
<span class="p">.</span><span class="nx">github</span><span class="o">/</span>
<span class="p">.</span><span class="nx">vscode</span><span class="o">/</span>
<span class="nx">docs</span><span class="o">/</span>
<span class="nx">frontend</span><span class="o">/</span>
<span class="nx">admin</span><span class="o">-</span><span class="nx">dashboard</span><span class="o">/</span>
<span class="o">*</span><span class="p">.</span><span class="nx">log</span>
<span class="nx">npm</span><span class="o">-</span><span class="nx">debug</span><span class="p">.</span><span class="nx">log</span><span class="o">*</span>
</code></pre></div>

<h3>4. Backend <code>.railwayignore</code></h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Ignore Node.js specific files in the backend to force Docker build</span>
<span class="nf">node_modules</span><span class="err">/</span>
<span class="na">.env</span>
<span class="err">*</span><span class="na">.log</span>
<span class="nf">npm-debug.log</span><span class="p">*</span>
</code></pre></div>

<h3>5. Backend <code>Dockerfile</code></h3>
<div class="codehilite"><pre><span></span><code><span class="k">FROM</span><span class="w"> </span><span class="s">node:20-alpine</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>

<span class="c"># Copy package files from backend directory</span>
<span class="k">COPY</span><span class="w"> </span>backend/package*.json<span class="w"> </span>./

<span class="c"># Install dependencies</span>
<span class="k">RUN</span><span class="w"> </span>npm<span class="w"> </span>install

<span class="c"># Copy source code from backend directory</span>
<span class="k">COPY</span><span class="w"> </span>backend/<span class="w"> </span>.

<span class="c"># Build the application</span>
<span class="k">RUN</span><span class="w"> </span>npm<span class="w"> </span>run<span class="w"> </span>build

<span class="c"># Create logs directory</span>
<span class="k">RUN</span><span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>logs

<span class="c"># Expose port</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">3002</span>

<span class="c"># Health check</span>
<span class="k">HEALTHCHECK</span><span class="w"> </span>--interval<span class="o">=</span>30s<span class="w"> </span>--timeout<span class="o">=</span>3s<span class="w"> </span>--start-period<span class="o">=</span>5s<span class="w"> </span>--retries<span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>CMD<span class="w"> </span>wget<span class="w"> </span>--no-verbose<span class="w"> </span>--tries<span class="o">=</span><span class="m">1</span><span class="w"> </span>--spider<span class="w"> </span>http://localhost:3002/health<span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span>

<span class="c"># Start the application</span>
<span class="k">CMD</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;npm&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;start&quot;</span><span class="p">]</span>
</code></pre></div>

<h2>Deployment Process</h2>
<h3>Step 1: Fix TypeScript Compilation Errors</h3>
<p>Before deployment, ensure all TypeScript errors are resolved:</p>
<h4>Fixed Issues:</h4>
<ol>
<li><strong>deposits.ts</strong>: Fixed <code>wallet_address</code> vs <code>walletAddress</code> typo</li>
<li><strong>rpcTesting.ts</strong>: Commented out <code>RPCTester</code> usage (module not found)</li>
<li><strong>supabaseMarkets.ts</strong>: Changed <code>executeSQL</code> to <code>executeQuery</code></li>
<li><strong>systemModeService.ts</strong>: Made <code>wsService</code> optional, added null checks</li>
<li><strong>systemMonitor.ts</strong>: Fixed Logger import path</li>
<li><strong>transactionVerificationService.ts</strong>: Fixed Solana type conversions</li>
<li><strong>webhookService.ts</strong>: Made <code>subscription_id</code> optional in method signature</li>
</ol>
<h3>Step 2: Railway CLI Setup</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Login to Railway</span>
railway<span class="w"> </span>login

<span class="c1"># Link to existing project (if applicable)</span>
railway<span class="w"> </span>link

<span class="c1"># Or create new project</span>
railway<span class="w"> </span>init
</code></pre></div>

<h3>Step 3: Environment Variables</h3>
<p>Set required environment variables in Railway dashboard:
- <code>NODE_ENV=production</code>
- <code>PORT=3002</code>
- Database connection strings
- API keys
- Solana RPC URLs</p>
<h3>Step 4: Deploy with Docker</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Deploy using Railway CLI with Docker</span>
railway<span class="w"> </span>up<span class="w"> </span>--detach

<span class="c1"># Monitor deployment</span>
railway<span class="w"> </span>logs<span class="w"> </span>--follow
</code></pre></div>

<h2>Service Configuration</h2>
<h3>Build Settings</h3>
<ul>
<li><strong>Builder</strong>: Dockerfile</li>
<li><strong>Dockerfile Path</strong>: <code>backend/Dockerfile</code></li>
<li><strong>Build Context</strong>: Root directory (<code>.</code>)</li>
<li><strong>Build Method</strong>: Docker using BuildKit</li>
</ul>
<h3>Deploy Settings</h3>
<ul>
<li><strong>Healthcheck Path</strong>: <code>/health</code></li>
<li><strong>Healthcheck Timeout</strong>: 100 seconds</li>
<li><strong>Restart Policy</strong>: ON_FAILURE (max 10 retries)</li>
<li><strong>Region</strong>: US East (Virginia, USA)</li>
<li><strong>Replicas</strong>: 1 instance</li>
<li><strong>Resources</strong>: 2 vCPU, 1 GB Memory</li>
</ul>
<h3>Networking</h3>
<ul>
<li><strong>Public URL</strong>: <code>quantdesk.up.railway.app</code></li>
<li><strong>Private URL</strong>: <code>pacific-imagination.railway.internal</code></li>
<li><strong>Port</strong>: 3002</li>
</ul>
<h2>Verification</h2>
<h3>Health Check</h3>
<div class="codehilite"><pre><span></span><code>curl<span class="w"> </span>https://quantdesk.up.railway.app/health
</code></pre></div>

<p>Expected response:</p>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;healthy&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-10-18...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;uptime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h3>Service Status</h3>
<ul>
<li>Check Railway dashboard for deployment status</li>
<li>Monitor logs for any errors</li>
<li>Verify all endpoints are responding</li>
</ul>
<h2>Troubleshooting</h2>
<h3>Common Issues</h3>
<h4>1. Dockerfile Not Found</h4>
<p><strong>Error</strong>: <code>Dockerfile does not exist</code>
<strong>Solution</strong>: Ensure <code>railway.toml</code> correctly points to <code>backend/Dockerfile</code></p>
<h4>2. TypeScript Compilation Errors</h4>
<p><strong>Error</strong>: Build fails during <code>npm run build</code>
<strong>Solution</strong>: Fix all TypeScript errors before deployment</p>
<h4>3. Package.json Not Found</h4>
<p><strong>Error</strong>: <code>Could not read package.json</code>
<strong>Solution</strong>: Update Dockerfile COPY commands to use <code>backend/package*.json</code></p>
<h4>4. Railway Using Node.js Buildpack</h4>
<p><strong>Error</strong>: Railway detects Node.js and uses wrong buildpack
<strong>Solution</strong>: Use <code>.railwayignore</code> files to force Docker build</p>
<h3>Debug Commands</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># Check Railway status</span>
railway<span class="w"> </span>status

<span class="c1"># View deployment logs</span>
railway<span class="w"> </span>logs

<span class="c1"># Check service health</span>
railway<span class="w"> </span>health

<span class="c1"># View environment variables</span>
railway<span class="w"> </span>variables
</code></pre></div>

<h2>Success Metrics</h2>
<h3>Deployment Success Indicators</h3>
<ul>
<li>‚úÖ Service deployed successfully via CLI</li>
<li>‚úÖ Docker build completed without errors</li>
<li>‚úÖ Health check endpoint responding</li>
<li>‚úÖ Service accessible at public URL</li>
<li>‚úÖ All TypeScript compilation errors resolved</li>
</ul>
<h3>Service Configuration Verified</h3>
<ul>
<li>‚úÖ Builder: Dockerfile</li>
<li>‚úÖ Dockerfile Path: backend/Dockerfile</li>
<li>‚úÖ Healthcheck: /health</li>
<li>‚úÖ Public URL: quantdesk.up.railway.app</li>
<li>‚úÖ Source: dextrorsal/quantdesk (main branch)</li>
</ul>
<h2>Next Steps</h2>
<ol>
<li><strong>Monitor Performance</strong>: Watch resource usage and response times</li>
<li><strong>Set Up Monitoring</strong>: Configure alerts for service health</li>
<li><strong>Environment Management</strong>: Set up staging/production environments</li>
<li><strong>CI/CD Integration</strong>: Consider GitHub Actions for automated deployments</li>
<li><strong>Scaling</strong>: Monitor traffic and scale resources as needed</li>
</ol>
<h2>Best Practices</h2>
<h3>Docker Optimization</h3>
<ul>
<li>Use multi-stage builds for smaller images</li>
<li>Leverage Docker layer caching</li>
<li>Optimize package installation order</li>
</ul>
<h3>Railway Configuration</h3>
<ul>
<li>Use <code>railway.toml</code> for consistent configuration</li>
<li>Set appropriate resource limits</li>
<li>Configure health checks properly</li>
<li>Use environment-specific variables</li>
</ul>
<h3>Security</h3>
<ul>
<li>Never commit sensitive environment variables</li>
<li>Use Railway's secure variable storage</li>
<li>Regularly update dependencies</li>
<li>Monitor for security vulnerabilities</li>
</ul>
<h2>AI Agent Rules &amp; Follow Set</h2>
<h3>üö® CRITICAL: Railway Deployment Protocol for AI Agents</h3>
<p><strong>RULE 1: ALWAYS USE RAILWAY CLI - NEVER USE MCP</strong>
- ‚ùå <strong>NEVER</strong> use Railway MCP tools (<code>mcp_Railway_*</code>)
- ‚úÖ <strong>ALWAYS</strong> use Railway CLI commands (<code>railway up</code>, <code>railway logs</code>, etc.)
- <strong>Reason</strong>: MCP tools often fail with 403 errors and don't handle Docker builds properly</p>
<p><strong>RULE 2: DOCKER-ONLY DEPLOYMENT MANDATE</strong>
- ‚ùå <strong>NEVER</strong> let Railway auto-detect Node.js buildpack
- ‚úÖ <strong>ALWAYS</strong> force Docker build using <code>.railwayignore</code> files
- ‚úÖ <strong>ALWAYS</strong> use <code>railway.toml</code> configuration files
- <strong>Reason</strong>: Node.js buildpack causes TypeScript compilation issues</p>
<p><strong>RULE 3: MONOREPO STRUCTURE HANDLING</strong>
- ‚úÖ <strong>ALWAYS</strong> set Docker build context to root (<code>.</code>)
- ‚úÖ <strong>ALWAYS</strong> use <code>COPY backend/package*.json ./</code> in Dockerfile
- ‚úÖ <strong>ALWAYS</strong> use <code>COPY backend/ .</code> for source code
- <strong>Reason</strong>: Monorepo structure requires specific COPY paths</p>
<p><strong>RULE 4: TYPESCRIPT ERROR RESOLUTION ORDER</strong>
1. <strong>FIRST</strong>: Fix ALL TypeScript compilation errors before deployment
2. <strong>SECOND</strong>: Test Docker build locally (<code>docker build -t test .</code>)
3. <strong>THIRD</strong>: Deploy to Railway only after successful local build
- <strong>Common fixes</strong>:
  - <code>wallet_address</code> ‚Üí <code>walletAddress</code>
  - Comment out missing modules (<code>RPCTester</code>)
  - Fix import paths (<code>../utils/logger</code>)
  - Handle optional properties (<code>subscription_id?</code>)</p>
<p><strong>RULE 5: DEPLOYMENT VERIFICATION SEQUENCE</strong>
1. Run <code>railway up --detach</code>
2. Check Railway dashboard for build status
3. Verify service settings show Docker build
4. Test health endpoint: <code>curl https://service.up.railway.app/health</code>
5. Check logs: <code>railway logs --follow</code></p>
<p><strong>RULE 6: CONFIGURATION FILE HIERARCHY</strong>
- ‚úÖ <strong>ALWAYS</strong> create both root AND backend <code>railway.toml</code>
- ‚úÖ <strong>ALWAYS</strong> create both root AND backend <code>.railwayignore</code>
- ‚úÖ <strong>ALWAYS</strong> set <code>context = "."</code> in root <code>railway.toml</code>
- <strong>Reason</strong>: Railway needs explicit configuration to override auto-detection</p>
<h3>ü§ñ AI Agent Deployment Checklist</h3>
<p><strong>Before Starting:</strong>
- [ ] Confirm Railway CLI is installed (<code>railway --version</code>)
- [ ] Verify user is logged in (<code>railway whoami</code>)
- [ ] Check project is linked (<code>railway status</code>)</p>
<p><strong>Pre-Deployment:</strong>
- [ ] Fix ALL TypeScript errors in backend code
- [ ] Create/verify <code>railway.toml</code> files (root + backend)
- [ ] Create/verify <code>.railwayignore</code> files (root + backend)
- [ ] Test Docker build locally
- [ ] Verify Dockerfile COPY paths are correct</p>
<p><strong>During Deployment:</strong>
- [ ] Use <code>railway up --detach</code> (NOT MCP tools)
- [ ] Monitor build logs in Railway dashboard
- [ ] Verify Docker build is being used (not Node.js buildpack)
- [ ] Check for any build errors</p>
<p><strong>Post-Deployment:</strong>
- [ ] Verify service is accessible at public URL
- [ ] Test health endpoint
- [ ] Check Railway service settings
- [ ] Monitor logs for any runtime errors</p>
<h3>üö´ Common AI Agent Mistakes to Avoid</h3>
<ol>
<li><strong>Using MCP Instead of CLI</strong></li>
<li>‚ùå <code>mcp_Railway_deploy()</code> </li>
<li>
<p>‚úÖ <code>railway up --detach</code></p>
</li>
<li>
<p><strong>Letting Railway Auto-Detect Buildpack</strong></p>
</li>
<li>‚ùå Relying on Railway's Node.js detection</li>
<li>
<p>‚úÖ Explicit Docker configuration with <code>.railwayignore</code></p>
</li>
<li>
<p><strong>Wrong Docker Context</strong></p>
</li>
<li>‚ùå <code>COPY package*.json ./</code> (fails in monorepo)</li>
<li>
<p>‚úÖ <code>COPY backend/package*.json ./</code></p>
</li>
<li>
<p><strong>Skipping TypeScript Error Fixes</strong></p>
</li>
<li>‚ùå Deploying with compilation errors</li>
<li>
<p>‚úÖ Fix ALL errors before deployment</p>
</li>
<li>
<p><strong>Missing Configuration Files</strong></p>
</li>
<li>‚ùå Assuming Railway will auto-configure</li>
<li>‚úÖ Explicit <code>railway.toml</code> and <code>.railwayignore</code> files</li>
</ol>
<h3>üìã Emergency Troubleshooting for AI Agents</h3>
<p><strong>If deployment fails:</strong>
1. Check Railway dashboard for specific error
2. Run <code>railway logs</code> to see build logs
3. Verify Dockerfile exists at <code>backend/Dockerfile</code>
4. Check if TypeScript errors are present
5. Ensure <code>.railwayignore</code> files are present</p>
<p><strong>If service won't start:</strong>
1. Check health endpoint: <code>/health</code>
2. Verify environment variables are set
3. Check port configuration (should be 3002)
4. Review application logs for runtime errors</p>
<p><strong>If build uses wrong method:</strong>
1. Verify <code>.railwayignore</code> files ignore Node.js files
2. Check <code>railway.toml</code> has <code>builder = "DOCKERFILE"</code>
3. Ensure Dockerfile path is correct
4. Force redeploy with <code>railway up --detach</code></p>
<h2>References</h2>
<ul>
<li><a href="https://docs.railway.com/deploy/dockerfile">Railway Docker Documentation</a></li>
<li><a href="https://docs.railway.com/deploy/railway-toml">Railway Configuration Files</a></li>
<li><a href="https://docs.railway.com/reference/cli">Railway CLI Commands</a></li>
<li><a href="https://docs.docker.com/develop/dev-best-practices/">Docker Best Practices</a></li>
</ul>
<hr />
<p><strong>Last Updated</strong>: October 2025<br />
<strong>Deployment Status</strong>: ‚úÖ Successfully Deployed<br />
<strong>Service URL</strong>: https://quantdesk.up.railway.app</p>
    </div>
</body>
</html>